(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{111:function(e,n,t){e.exports=t(163)},116:function(e,n,t){},120:function(e,n,t){},123:function(e,n,t){},125:function(e,n,t){},126:function(e,n,t){},127:function(e,n,t){},128:function(e,n,t){},129:function(e,n,t){},130:function(e,n,t){},135:function(e,n,t){},136:function(e,n,t){},137:function(e,n,t){},138:function(e,n,t){},139:function(e,n,t){},140:function(e,n,t){},141:function(e,n,t){},142:function(e,n,t){},143:function(e,n,t){},161:function(e,n,t){},162:function(e,n,t){},163:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),r=t(26),c=t.n(r),i=(t(116),t(31)),l="food",u="food_new",s="food_details",d="food_edit",m="buy",f="containers",p="settings",v="consume",E={FOOD_LIST:"/app?page=food",FOOD_ADD:"/app?page=food_new",FOOD_DETAILS:"/app?page=food_details",FOOD_EDIT:"/app?page=food_edit",BUY_FOOD:"/app?page=buy",CONTAINERS_LIST:"/app?page=containers",SETTINGS:"/app?page=settings",CONSUME:"/app?page=consume",HOME:"/app"},b=t(29),g=Object(b.a)({basename:"/Inventory-v2",forceRefresh:!1}),h=t(23),O=t(175),C=function(e){e.title;var n=e.icon,t=(e.path,e.active);return o.a.createElement("div",{className:"NavIcon-Container"},o.a.createElement("div",{className:"NavIcon ".concat(t?"NavIcon-Active":"")},o.a.createElement(O.a,{style:{color:t?"primary":"text"}},n)," "))},N=(t(120),[{title:"Assets",icon:"work-outline",path:E.CONTAINERS_LIST,tag:[f]},{title:"Consume",icon:"whatshot",path:E.CONSUME,tag:[v]},{title:"Food",icon:"fastfood",path:E.FOOD_LIST,tag:[l,u,s]},{title:"Buy",icon:"shopping-cart",path:E.BUY_FOOD,tag:[m]},{title:"Settings",icon:"settings",path:E.SETTINGS,tag:[p]}]),y=function(){var e=Object(i.e)().search,n=new URLSearchParams(e),t=Object(i.d)();return o.a.createElement("div",{className:"NavBarContainer"},N.map((function(e,a){var r=e.tag,c=Object(h.a)(e,["tag"]);return o.a.createElement("div",{key:a,onClick:function(){return t.push(c.path)}},o.a.createElement(C,Object.assign({},c,{active:r.indexOf(n.get("page")||"")>-1})))})))},S=t(22),F=(t(122),t(10)),w=(t(123),function(e){var n=e.mainText,t=e.rightComponent,a=e.smallComponent,r=e.onClick,c=e.actionButton,i=e.style;return o.a.createElement("div",{className:"GenericCard",onClick:r,style:i},c&&o.a.createElement("div",{className:"GenericCard-ActionButton"},o.a.createElement("div",{onClick:c.onClick},o.a.createElement(O.a,null,c.iconName))),o.a.createElement("div",{className:"GenericCard-Left"},o.a.createElement("div",{className:"GenericCard-MainText"},"string"===typeof n?n:o.a.createElement(o.a.Fragment,null,n)),o.a.createElement("div",{className:"GenericCard-containers"},a)),o.a.createElement("div",{className:"GenericCard-Right"},t))}),j=function(e){return Number.parseFloat(e.toString())},k=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return parseFloat(e.toFixed(n))||0},D=function(e){return Math.ceil(Math.abs(((new Date).getTime()-new Date(e).getTime())/864e5))},I=function(e){return new Date(e).getTime()<(new Date).getTime()},x=function(e){for(var n="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=t.length,o=0;o<e;o++)n+=t.charAt(Math.floor(Math.random()*a));return n},T=t(52),P=t.n(T),L={UNOPENED:{color:"white",icon:"kitchen"},UNOPENED_EXPIRED:{color:"white",icon:"delete_forever"},OPENED:{color:"orange",icon:"kitchen"},OPENED_EXPIRED:{color:"orange",icon:"delete_forever"}},B=function(e){var n=e.containers.map((function(e,n){var t=e.expiryDate,a=e.dateOpened,o=(Object.keys(L)[0],!!a);return{status:!!t&&I(t)?o?"OPENED_EXPIRED":"UNOPENED_EXPIRED":o?"OPENED":"UNOPENED"}})),t=P.a.groupBy(n,"status");return o.a.createElement(o.a.Fragment,null,Object.keys(t).sort((function(e,n){return t[e].length-t[n].length})).map((function(e){return o.a.createElement("div",{style:{color:L[e].color,display:"flex",alignItems:"center",marginRight:4}},o.a.createElement(O.a,{style:{color:L[e].color}},L[e].icon),t[e].length>1&&"x ".concat(t[e].length))})))},R=(t(125),function(e){var n=e.icon,t=e.value,a=e.style;return o.a.createElement("div",{className:"FoodCard-SmallInfo",style:a},n&&o.a.createElement(O.a,null,n),t)}),A=Object(i.f)((function(e){var n=e.name,t=e.unit,a=e.info,r=e.onClick,c=e.containers,i=e.additionalText,l=Object(h.a)(e,["name","unit","info","onClick","containers","additionalText"]),u=o.a.createElement(R,{value:"".concat(a.totalAmount," ").concat(t),style:{fontSize:18}}),s=a.numberOfContainers?o.a.createElement(B,{containers:c}):"No containers";return o.a.createElement(w,Object.assign({mainText:i?o.a.createElement(o.a.Fragment,null,n,o.a.createElement("div",{className:"FoodCard-AdditionalText"},i)):n,rightComponent:a.understock?o.a.createElement("div",{className:"FoodCard-RightComponent"},u,o.a.createElement("div",{className:"FoodCard-UnderstockText"},"Understock")):u,smallComponent:s,onClick:r},l))})),_=t(7),U=t(79);t(126);var q=Object(U.a)((function(){var e=o.a.useState({title:"",withBackButton:!1}),n=Object(_.a)(e,2);return{navOptions:n[0],setNavOptions:n[1]}})),$=Object(_.a)(q,2),H=$[0],W=$[1],G=function(){var e=W().navOptions,n=e.title,t=e.navButtons,a=e.withBackButton,r=Object(i.d)();return o.a.createElement("div",{className:"Header"},o.a.createElement("div",null,a&&o.a.createElement(O.a,{style:{fontSize:32},onClick:function(){return r.goBack()}},"navigate_before"),n),o.a.createElement("div",{className:"Header-NavButtonGroup"},t&&t.map((function(e){var n=e.iconName,t=e.onClick;return o.a.createElement("div",{className:"Header-NavButton",onClick:t},o.a.createElement(O.a,null,n))}))))},M=function(e){var n=e.children;return o.a.createElement(H,null,o.a.createElement(G,null),n)},z=function(e,n){return function(t){var a=W().setNavOptions;return o.a.useEffect((function(){a(n)}),[]),o.a.createElement(e,t)}},Q=(t(127),t(128),function(e){var n=e.icon,t=e.label,a=e.selected,r=e.onSelect;return o.a.createElement("div",{className:a?"Chip-Selected":"Chip",onClick:r},n&&o.a.createElement(O.a,null,n),t)}),K=function(e){var n=e.options,t=e.onSelect,a=e.value,r=function(e){t(e)};return o.a.createElement("div",{className:"ChipSelect-Container"},n.map((function(e){return o.a.createElement(Q,Object.assign({},e,{key:e.label,selected:a===e.value,onSelect:function(){return r(e.value)}}))})))},J=function(e){var n=e.onChange,t=e.value,a=e.required,r=void 0!==a&&a,c=e.validate,i=void 0===c?function(){return!0}:c,l=e.name,u=e.label,s=e.type,d=void 0===s?"text":s,m=e.placeholder,f=e.className,p=e.iconName,v=Object(h.a)(e,["onChange","value","required","validate","name","label","type","placeholder","className","iconName"]),E=o.a.useState(i(t)),b=Object(_.a)(E,2),g=b[0],C=b[1],N=function(e){r&&!e||!i(e)?C(!1):C(!0),n(e)},y=function(e){return e instanceof Date?e.toLocaleString("en-US"):e||""},S="Input  ".concat(g?"":"Invalid"),F="Input-Inner ".concat(f||"");switch(d){case"select":if(!v)throw new Error("Input field is `select` but not options provided.");var w=v,j=w.options,k=w.multiple,D=void 0!==k&&k,I=Object(h.a)(w,["options","multiple"]);return o.a.createElement("div",null,u&&o.a.createElement("p",null,u),o.a.createElement("div",{className:S},p&&o.a.createElement(O.a,null,p," "),o.a.createElement("select",Object.assign({multiple:D,name:l},I,{className:F,onChange:function(e){return N(e.target.value)},value:y(t)}),m&&o.a.createElement("option",{value:"",selected:""===t},m),j.map((function(e){return o.a.createElement("option",{selected:e===t},e)}))),o.a.createElement(O.a,null,"expand_more")));default:return o.a.createElement(o.a.Fragment,null,u&&o.a.createElement("p",null,u),o.a.createElement("div",{className:S},p&&o.a.createElement(O.a,null,p," "),o.a.createElement("input",Object.assign({name:l},v,{className:F,placeholder:m,onChange:function(e){switch(d){case"number":N(parseFloat(e.target.value));break;default:N(e.target.value)}},type:d,value:y(t)})),"number"===d&&o.a.createElement("div",{className:"Input-NumberPicker"},o.a.createElement(O.a,{onClick:function(){return N((t||0)+1)}},"expand_less"),o.a.createElement(O.a,{onClick:function(){return N((t||0)-1)}},"expand_more"))))}},V=(t(129),function(e){var n=e.iconName,t=e.title,a=e.subtitle;return o.a.createElement("div",{className:"CenterNotice"},o.a.createElement(O.a,{style:{fontSize:72}},n),o.a.createElement("div",{style:{textAlign:"center"}},t&&o.a.createElement("h3",null,t),a&&o.a.createElement("h6",null,a)))}),Y=function(e){var n=e.watch,t=e.children,a=Object(h.a)(e,["watch","children"]);return 0!==n.length&&n?t:o.a.createElement(V,a)},X=V,Z=(t(130),{iconName:"search",title:"No results found"}),ee=function(e){var n=e.list,t=e.filterFunc,a=e.renderItem,r=e.minimumSearchLength,c=void 0===r?1:r,i=e.inputConfig,l=e.emptyResultConfig,u=void 0===l?Z:l,s=o.a.useState(""),d=Object(_.a)(s,2),m=d[0],f=d[1],p=m.length>=c?n.filter((function(e){return t(e,m)})):n;return o.a.createElement("div",{className:"SearchGroup"},o.a.createElement("div",{className:"SearchGroup-Input"},o.a.createElement(J,Object.assign({},i,{value:m,onChange:function(e){return f(e)}}))),o.a.createElement("div",{className:"SearchGroup-List"},o.a.createElement(Y,Object.assign({watch:p},u),p.map((function(e){return a(e)})))))},ne=t(9),te=t(11);function ae(){var e=Object(F.a)(["\n    {\n        foods @client {\n            name\n            unit\n            containers {\n                expiryDate\n                dateOpened\n            }\n            info {\n                numberOfContainers\n                totalAmount\n                understock\n            }\n        }\n    }\n"]);return ae=function(){return e},e}var oe=Object(te.a)(ae()),re=z((function(){var e=Object(ne.b)(oe),n=e.loading,t=e.error,a=e.data,r=e.refetch;if(o.a.useEffect((function(){r()}),[window.location.pathname]),t)return alert(t.message),null;if(n)return o.a.createElement("div",null," loading...");var c=a.foods.sort((function(e,n){return e.name.localeCompare(n.name)}));return o.a.createElement(Y,{watch:c,iconName:"fastfood",title:"No food is added",subtitle:"click the '+' button to add a new type of food"},o.a.createElement(ee,{list:c,filterFunc:function(e,n){return e.name.toLowerCase().includes(n.toLowerCase())},inputConfig:{name:"FoodSearchInput",iconName:"search",placeholder:"Search for food..."},minimumSearchLength:2,renderItem:function(e){return o.a.createElement(A,Object.assign({},e,{onClick:function(){return g.replace(E.FOOD_DETAILS+"&food=".concat(e.name))}}))}}))}),{title:"Your Food",navButtons:[{iconName:"add",onClick:function(){return g.push(E.FOOD_ADD)}}]}),ce=t(41),ie=t.n(ce),le=t(59),ue=t(82),se=t(83),de={unit:"unit",g:"g",mL:"mL"},me=function(){function e(n,t){Object(ue.a)(this,e),this.amount=n,this.currency=t}return Object(se.a)(e,[{key:"as",value:function(n){var t=this.amount*e.toHKDRate(this.currency);return new e(t/e.toHKDRate(n),n)}},{key:"add",value:function(n){return new e(n.as(this.currency).amount+this.amount,this.currency)}}]),e}();me.toHKDRate=function(e){switch(e){case"EUR":return 8.6;case"USD":return 7.6;case"PLN":return 2;case"HKD":return 1}},me.DEFAULT_ZERO=new me(0,"HKD");var fe=t(15),pe=t(24),ve=t(25),Ee=t(48),be=(t(135),function(e){var n=e.title,t=e.icon,a=e.color,r=void 0===a?"primary":a,c=e.onClick,i=e.disabled,l=void 0!==i&&i,u=e.className;return o.a.createElement("div",{className:"".concat(u," Button Button-").concat(r," ").concat(l?"Button-Disabled":""),onClick:l?void 0:c},t&&o.a.createElement(O.a,null,t),n)}),ge=(t(136),function(e){var n=e.initialValue,t=e.layout,a=e.submitIconName,r=e.submitButtonText,c=e.onSubmit,l=e.withSubmitButton,u=void 0===l||l,s=e.disabledFields,d=e.setFormValue,m=e.disableSubmitButton,f=Object(Ee.c)((function(e){return e}),Ee.b),p=Object(i.d)(),v=Object(i.e)(),E="function"===typeof t?t(f,p,v,n):t,b=Object(ve.a)(E.reduce((function(e,n){return[].concat(Object(ve.a)(e),Object(ve.a)(n))}),[])),g=n||Object.assign.apply(Object,[{}].concat(Object(ve.a)(b.map((function(e){var n=e.name,t=e.type;if(!e.required)return null;switch(t){case"number":return Object(pe.a)({},n,0);case"date":return Object(pe.a)({},n,new Date);default:return Object(pe.a)({},n,"")}}))))),O=o.a.useState(g),C=Object(_.a)(O,2),N=C[0],y=C[1];o.a.useEffect((function(){d&&d(N)}),[N,d]);var S=!b.some((function(e){var n=e.name,t=e.required,a=e.validate;return t&&!N[n]||a&&!a(N[n])})),F=s?s(N):[],w=function(e){return{value:N[e],onChange:function(n){return function(e,n){var t=typeof g[e];y("number"===t?Object(fe.a)({},N,Object(pe.a)({},e,parseFloat(n)||0)):Object(fe.a)({},N,Object(pe.a)({},e,n)))}(e,n)},disabled:F.includes(e)}};return o.a.createElement("div",{className:"Form"},E.map((function(e){return o.a.createElement("div",{className:"Form-Row"},e.map((function(e){var n=e.name,t=e.flex,a=void 0===t?1:t,r=Object(h.a)(e,["name","flex"]);return o.a.createElement("div",{className:"Form-Col",style:{flex:a}},o.a.createElement(J,Object.assign({name:n},r,w(n))))})))})),o.a.createElement("div",{style:{flex:1}}),u&&o.a.createElement(be,{color:"info",title:r||"Submit",icon:a,onClick:c&&function(){return c(N)},disabled:!S||m,className:"Form-Submit"}))});function he(){var e=Object(F.a)(["\n    query {\n        foods @client {\n            name\n        }\n    }\n"]);return he=function(){return e},e}function Oe(){var e=Object(F.a)(["\n    mutation addFood($name: String!, $unit: Unit!) {\n        addFood(name: $name, unit: $unit) @client {\n            id\n            name\n        }\n    }\n"]);return Oe=function(){return e},e}var Ce=Object(te.a)(Oe()),Ne=Object(te.a)(he()),ye=function(e,n,t,a){var o=e.foods;return[[{label:"Food Name",name:"name",placeholder:"Name",iconName:"edit",required:!0,validate:function(e){return!o.find((function(e){e.name;return!0}))}}],[{label:"Unit",name:"unit",placeholder:"Unit",required:!0,flex:4,type:"select",options:Object.values(de)}],[{label:"Expected Stock Level",type:"number",name:"stockLevel",placeholder:"Stock level",validate:function(e){return null===e||e>=0}}]]},Se=z((function(){var e=Object(i.d)(),n=Object(ne.b)(Ne),t=(n.loading,n.error,n.data,Object(ne.a)(Ce)),a=Object(_.a)(t,1)[0],r=function(){var n=Object(le.a)(ie.a.mark((function n(t){return ie.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a({variables:{name:t.name,unit:t.unit}});case 2:S.b.success("Food Added.",{position:S.b.POSITION.TOP_CENTER,autoClose:1e3,onClose:function(){return e.goBack()}});case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return o.a.createElement(ge,{submitButtonText:"Add Food",submitIconName:"add",onSubmit:r,layout:ye})}),{title:"Add Food",withBackButton:!0});function Fe(){var e=Object(F.a)(["\n    mutation editFood($originalName: String!, $food: Food!) {\n        editFood(originalName: $originalName, newData: $food) @client {\n            name\n        }\n    }\n"]);return Fe=function(){return e},e}function we(){var e=Object(F.a)(["\n    query getFoodName($editingFood: String!) {\n        foods @client {\n            name\n        }\n        food(name: $editingFood) @client {\n            name\n            unit\n            stockLevel\n        }\n    }\n"]);return we=function(){return e},e}var je=Object(te.a)(we()),ke=Object(te.a)(Fe()),De=z((function(){var e=o.a.useState(!1),n=Object(_.a)(e,2),t=n[0],a=n[1],r=Object(i.d)(),c=Object(i.e)(),l=new URLSearchParams(c.search).get("food"),u=Object(ne.b)(je,{variables:{editingFood:l}}),s=u.data,d=u.loading,m=Object(ne.a)(ke),f=Object(_.a)(m,1)[0],p=function(){var e=Object(le.a)(ie.a.mark((function e(n){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f({variables:{originalName:l,food:n}});case 2:S.b.success("Info updated",{autoClose:1e3,onClose:function(){a(!1),r.push(E.FOOD_LIST)}});case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return d?null:o.a.createElement(ge,{layout:ye,initialValue:null===s||void 0===s?void 0:s.food,onSubmit:p,disableSubmitButton:t})}),{title:"Edit Food Info",withBackButton:!0}),Ie=function(e){var n=e.title,t=(e.iconName,e.value);return o.a.createElement("div",{className:"AuxInfo"},t,o.a.createElement("div",{className:"AuxInfo-Title"},n))},xe=function(e){var n=e.iconName,t=e.description,a=e.value,r=e.color;return o.a.createElement("div",{className:"ListInfoItem-Container"},o.a.createElement("div",{className:"ListInfoItem-Left"},o.a.createElement(O.a,{style:{color:r,fontSize:32}},n," ")),o.a.createElement("div",{className:"ListInfoItem-Right",style:{color:r}},o.a.createElement("div",{style:{color:r,fontSize:18}},a),o.a.createElement("div",{style:{color:r}},t)))},Te=(t(137),function(e){var n=e.color,t=e.percentageLeft,a=e.percentageDifference,r=void 0===a?0:a;return o.a.createElement("div",{className:"PercentageBar-".concat(n),style:{gridTemplateColumns:function(){var e="".concat(t-r,"% ").concat(r,"% ").concat(100-t,"%");return console.log(e),e}()}},o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null))}),Pe=(t(138),function(e){var n=e.container,t=(n.capacity,n.amount),a=n.datePurchased,r=n.expiryDate,c=n.dateOpened,i=n.price,l=n.opened,u=n.expired,s=n.percentageLeft,d=e.unit,m=e.onClick,f=u?"red":l?"info":"text",p=u?"delete_forever":"kitchen";return o.a.createElement("div",{onClick:m,className:"ContainerCard-Container ContainerCard-Container-".concat(f)},o.a.createElement("div",{className:"ContainerCard-ContainerLeft"},D(a)," days old",o.a.createElement(O.a,{style:{color:f,fontSize:32}},p),k(i.amount)," ",i.currency),o.a.createElement("div",{className:"ContainerCard-ContainerRight"},o.a.createElement("div",{className:"ContainerCard-ContainerRightUp"},s.toFixed(2),"%",o.a.createElement(Te,{color:f,percentageLeft:s})),o.a.createElement("div",{className:"ContainerCard-ContainerRightBottom"},c?o.a.createElement(o.a.Fragment,null,o.a.createElement(O.a,null,"broken_image"),o.a.createElement("h6",null,new Date(c).toLocaleDateString())):o.a.createElement(o.a.Fragment,null,o.a.createElement(O.a,null,"check"),o.a.createElement("h6",null,"Unopened")),o.a.createElement("h6",{style:{color:f}},function(){if(!r)return"";var e=D(r);return u?"| Expired ".concat(e," day(s) ago"):"| Expire in ".concat(e," days")}()),o.a.createElement("div",{className:"ContainerCard-Amount"},t," ",d))))});t(139);function Le(){var e=Object(F.a)(["\n    query foodDetails($food: String!) {\n        food(name: $food) @client {\n            name\n            unit\n            stockLevel\n            containers {\n                capacity\n                amount\n                datePurchased\n                expiryDate\n                dateOpened\n                price\n\n                expired\n                opened\n                percentageLeft\n            }\n            info {\n                numberOfContainers\n                expiredContainers\n                openedContainers\n                totalAmount\n                totalWorth\n                percentageLeft\n                understock\n            }\n        }\n    }\n"]);return Le=function(){return e},e}var Be=Object(te.a)(Le()),Re=function(){var e=Object(i.d)(),n=Object(i.e)(),t=W(),a=t.navOptions,r=t.setNavOptions,c=new URLSearchParams(n.search).get("food"),l=Object(ne.b)(Be,{variables:{food:c}}),u=l.loading,s=l.error,d=l.data;if(c||e.goBack(),o.a.useEffect((function(){r(Object(fe.a)({},a,{title:c,withBackButton:!0,navButtons:[{iconName:"edit",onClick:function(){return e.push("".concat(E.FOOD_EDIT,"&food=").concat(c))}}]}))}),[]),u)return null;if(s)return alert(s.message),null;var m=d.food,f=[{title:"Total Amount",iconName:"kitchen",value:"".concat(k(m.info.totalAmount)," ").concat(m.unit)},{title:"Worth",iconName:"money",value:"".concat(k(m.info.totalWorth)," \u20ac")},{title:"Percentage Left",iconName:"percentage",value:"".concat(k(m.info.percentageLeft)," %")},{title:"Target Stock Amount",iconName:"",value:"".concat(m.stockLevel," ").concat(m.unit)}],p=[{color:"white",iconName:"kitchen",description:"Unopened Containers",value:(m.info.numberOfContainers-m.info.openedContainers).toString()},{color:"orange",iconName:"kitchen",description:"Opened Containers",value:m.info.openedContainers.toString()},{color:"red",iconName:"delete_forever",description:"Expired Containers",value:m.info.expiredContainers.toString()}];return o.a.createElement("div",{className:"FoodDetails-Container"},o.a.createElement("div",{className:"FoodDetails-TopSection"},o.a.createElement("div",{className:"FoodDetails-TopSection-AuxInfoRow"},f.map((function(e){return o.a.createElement(Ie,Object.assign({key:e.title},e))}))),m.info.numberOfContainers>0&&o.a.createElement("div",{className:"FoodDetails-TopSection-LIstInfoRow"},p.map((function(e,n){return o.a.createElement(xe,Object.assign({},e,{key:n}))})))),o.a.createElement("div",{className:"FoodDetails-BottomSection"},o.a.createElement(Y,{watch:m.containers,iconName:"kitchen",title:"No Containers",subtitle:"Use the buy food function to add containers of this food"},o.a.createElement(o.a.Fragment,null,o.a.createElement("h6",null,m.info.numberOfContainers," Container(s) "),m.containers.map((function(e){return o.a.createElement(Pe,{container:e,unit:m.unit})}))))))},Ae=z((function(){return o.a.createElement("div",null,"Hello world")}),{title:"Assets",navButtons:[{iconName:"add",onClick:function(){}}]}),_e=(t(140),{foods:[]}),Ue=function(){var e=localStorage.getItem("db");return e?JSON.parse(e):(localStorage.setItem("db",JSON.stringify(_e)),_e)},qe=function(e){return localStorage.setItem("db",JSON.stringify(e))},$e={Query:{food:function(e,n){var t=n.name,a=Ue().foods.find((function(e){return e.name===t}));return a},foods:function(){return Ue().foods}},FoodContainer:{datePurchased:function(e){return new Date(e.datePurchased)},opened:function(e){return!!e.dateOpened},expired:function(e){return!!e.expiryDate&&I(e.expiryDate)},percentageLeft:function(e){return e.amount/e.capacity*100}},Food:{info:function(e){var n=e.containers.reduce((function(e,n){return e+n.amount}),0),t=e.containers.reduce((function(e,n){return e+n.capacity}),0),a=e.containers.filter((function(e){return e.expiryDate&&new Date(e.expiryDate).getDate()<(new Date).getDate()})).length,o=e.containers.filter((function(e){return!!e.dateOpened})).length,r=e.containers.reduce((function(e,n){var t=n.price;return e+new me(t.amount,t.currency).as("EUR").amount}),0);return{__typename:"FoodInfo",numberOfContainers:e.containers.length,expiredContainers:a,openedContainers:o,totalAmount:n,totalWorth:r,percentageLeft:0===t?0:n/t*100,understock:e.stockLevel&&e.stockLevel>n}}},Mutation:{addFood:function(e,n){var t=n.name,a=n.unit,o=Ue();o.foods.push({__typename:"Food",name:t,unit:a,containers:[]}),qe(o)},buyFood:function(e,n){var t=n.buyOrders,a=Ue(),o=[];return t.forEach((function(e){var n=e.foodName,t=e.price,r=e.expiryDate,c=e.amount,i=a.foods.findIndex((function(e){return e.name===n}));if(i>-1){var l={__typename:"FoodContainer",id:x(24),capacity:j(c),amount:j(c),datePurchased:new Date,expiryDate:r?new Date(r):null,dateOpened:null,price:new me(k(t.amount),t.currency)};a.foods[i].containers.push(l),o.push(l)}})),qe(a),o},editFood:function(e,n){var t=n.originalName,a=n.newData,o=Ue();return o.foods=o.foods.map((function(e){return e.name!==t?e:Object(fe.a)({},a,{containers:e.containers})})),qe(o),a},consumeFoods:function(e,n){var t=n.consumeOrders,a=Ue(),o=!1;return t.forEach((function(e){var n=e.containerID,t=e.amount,r=a.foods.findIndex((function(e){return e.containers.find((function(e){return e.id===n}))}));if(r<0)o=!0;else{var c=a.foods[r].containers.findIndex((function(e){return e.id===n}));if(a.foods[r].containers[c].amount<t)o=!0;else{a.foods[r].containers[c].amount-=t,a.foods[r].containers[c].dateOpened||(a.foods[r].containers[c].dateOpened=new Date);var i=a.foods[r].containers[c];i.amount/i.capacity<.01&&(a.foods[r].containers=a.foods[r].containers.filter((function(e,n){return n!==c})))}}})),o||qe(a),o?t.map((function(e){return e.containerID})):null}}},He=function(e){var n=e.title,t=e.description,a=e.buttonTitle,r=e.onClick;return o.a.createElement("div",{className:"Settings-DescriptionRow"},o.a.createElement("div",{className:"Settings-DescriptionRowLeft"},o.a.createElement("div",{className:"Settings-DescriptionRowTitle"},n),o.a.createElement("div",{className:"Settings-DescriptionRowDescription"},t)),o.a.createElement("div",{className:"Settings-DescriptionRowRight"},o.a.createElement("div",{className:"Settings-DescriptionRowButton",onClick:r},a)))},We=[{title:"Reset Database",description:"Remove all data you have saved in the local storage. This can not be undone.",buttonTitle:"Remove",onClick:function(){window.localStorage.setItem("db",JSON.stringify(_e)),S.b.info("Database has been reset.",{autoClose:3e3,onClose:function(){return window.location.reload()}})}},{title:"Validate Database",description:"Validate the values in the current database and try to correct it.",buttonTitle:"Validate"}],Ge=z((function(){return o.a.createElement("div",{className:"Settings-Container"},We.map((function(e,n){return o.a.createElement(He,Object.assign({key:n},e))})))}),{title:"Settings"});t(141);function Me(){var e=Object(F.a)(["\n    query {\n        foods @client {\n            name\n            unit\n            containers {\n                expiryDate\n                dateOpened\n            }\n            info {\n                totalAmount\n                numberOfContainers\n                understock   \n            }\n        }\n    }\n"]);return Me=function(){return e},e}var ze=Object(te.a)(Me()),Qe=function(e){var n=e.onFoodSelected,t=e.filterFood,a=e.foodCounts,r=void 0===a?{}:a,c=Object(ne.b)(ze),i=c.loading,l=c.error,u=c.data,s=c.refetch;if(o.a.useEffect((function(){s()}),[n,s]),i)return o.a.createElement(X,{iconName:"hamburger",title:"Loading Food List..."});if(l)return alert(l.message),null;var d=u.foods,m=(t?d.filter(t):d).sort((function(e,n){if(e.info.understock&&!n.info.understock)return-1;if(!e.info.understock&&n.info.understock)return 1;var t=e.containers.length-n.containers.length;return 0!==t?t:e.name.toLowerCase().localeCompare(n.name.toLowerCase())}));return o.a.createElement("div",{className:"FoodTypePicker-Container"},o.a.createElement(Y,{watch:m,iconName:"hamburger",title:"No food available",subtitle:"Add some food or buy some containers for them and try again."},o.a.createElement(ee,{list:m,filterFunc:function(e,n){return e.name.toLowerCase().includes(n.toLowerCase())},inputConfig:{name:"FoodSearchInput",iconName:"search",placeholder:"Search for food..."},minimumSearchLength:1,renderItem:function(e){return o.a.createElement(A,Object.assign({},e,{onClick:function(){return n(e.name)},additionalText:r[e.name]&&"".concat(r[e.name]," selected")}))}})))},Ke=(t(74),function(e){var n=e.step,t=e.totalSteps,a=function(e){var n=e.i,t=e.status;return o.a.createElement("div",{className:"StepIndicator-StepComponent StepIndicator-StepComponent-".concat(t)},o.a.createElement("div",{className:"StepIndicator-Line"}),o.a.createElement("div",{className:"StepIndicator-Center"},n+1),o.a.createElement("div",{className:"StepIndicator-Line"}))},r=function(e){return e<n?"passed":e===n?"ongoing":"pending"};return o.a.createElement("div",{className:"StepIndicator-Container"},Object(T.range)(t).map((function(e){return o.a.createElement(a,{i:e,status:r(e)})})))}),Je=function(e){var n=e.open,t=e.requestClose,a=e.children,r=e.style,c=e.headerTitle,i=e.totalSteps,l=o.a.useState(0),u=Object(_.a)(l,2),s=u[0],d=u[1];return o.a.useEffect((function(){d(0)}),[n]),n?o.a.createElement("div",{className:"Wizard-Container",style:r},o.a.createElement("div",{className:"Wizard-Header"},o.a.createElement("div",{className:"Header"},o.a.createElement("div",null,o.a.createElement(O.a,{style:{fontSize:32},onClick:t},"navigate_before")),o.a.createElement("div",{className:"Header-NavButtonGroup"},c(s)))),o.a.createElement(Ke,{step:s,totalSteps:i}),o.a.createElement("div",{className:"Wizard-Content"},a(s,d))):null},Ve=(t(142),function(e){var n=e.questions,t=e.onChange,a=e.form;return o.a.createElement("div",{className:"QuestionStep-Container"},n.map((function(e){var n=e.name,r=e.type,c=e.questionText,i=e.options;return o.a.createElement("div",{className:"QuestionStep-QuestionContainer",key:n},o.a.createElement("div",{className:"QuestionStep-QuestionText"},c),"select"===r?o.a.createElement(K,{value:a[n],options:i,onSelect:function(e){return t(n,e)}}):o.a.createElement(J,{type:r,name:n,value:a[n],onChange:function(e){t(n,e)}}))})))});t(143);function Ye(){var e=Object(F.a)(["\n    query getFoodUnit($food: String!) {\n        food(name: $food) @client {\n            unit\n        }\n    }\n"]);return Ye=function(){return e},e}var Xe=Object(te.a)(Ye()),Ze=function(e){var n,t,a=e.form,r=a.selectedFood,c=a.amount,i=a.price,l=a.currency,u=a.containersCount,s=a.priceType,d=a.expiryDate,m=Object(ne.b)(Xe,{variables:{food:r}}).data,f=0===s?i*u:i;return o.a.createElement("div",{className:"FormPreview-Container"},o.a.createElement("div",{className:"FormPreview-Top"},o.a.createElement("div",{className:"FormPreview-TopLeft"},r,o.a.createElement(O.a,null,"kitchen"),o.a.createElement("div",null,"x ",u)),o.a.createElement("div",{className:"FormPreview-TopRight"},f," ",l)),o.a.createElement("div",{className:"FormPreview-Bottom"},o.a.createElement("div",{className:"FormPreview-BottomLeft"},"Total: ",c*u," ",null===m||void 0===m||null===(n=m.food)||void 0===n?void 0:n.unit," ","  ","(",c," ",null===m||void 0===m||null===(t=m.food)||void 0===t?void 0:t.unit," per ",o.a.createElement(O.a,null,"kitchen"),")"),o.a.createElement("div",{className:"FormPreview-BottomRight"},o.a.createElement(O.a,null,"today"),d?new Date(d).toDateString():"N/A")))},en=(t(75),function(e){var n=e.questions,t=e.currentPage,a=e.form,r=e.setFormField,c=e.setStep;return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ze,{form:a}),o.a.createElement(Ve,{form:a,questions:n,onChange:r}),o.a.createElement("div",{style:{flex:1}}),o.a.createElement("div",{className:"FoodQuantityInfo-ButtonRow"},o.a.createElement(be,{title:"Previous",icon:"arrow_back",color:"",onClick:function(){return c(t-1)}}),o.a.createElement(be,{title:"Next",icon:"arrow_forward",color:"",onClick:function(){return c(t+1)}})))}),nn=function(e){var n=e.open,t=e.requestClose,a=e.style,r=e.onBuyOrdersAdded,c={selectedFood:"",price:0,currency:"EUR",amount:0,containersCount:0,priceType:0,expiryDate:null},i=o.a.useState(c),l=Object(_.a)(i,2),u=l[0],s=l[1],d=function(e,n){return s(Object(fe.a)({},u,Object(pe.a)({},e,n)))};if(o.a.useEffect((function(){s(c)}),[n]),!n)return null;var m=function(e,n){switch(e){case 0:return o.a.createElement(Qe,{onFoodSelected:function(e){d("selectedFood",e),n(1)}});case 1:return o.a.createElement(en,{questions:[{name:"amount",type:"number",questionText:"Container Capacity"},{name:"containersCount",type:"number",questionText:"Number of containers"}],currentPage:1,setStep:n,form:u,setFormField:d});case 2:return o.a.createElement(en,{questions:[{name:"price",type:"number",questionText:"Price"},{name:"currency",type:"select",questionText:"Currency",options:[{value:"EUR",label:"\u20ac"},{value:"PLN",label:"z\u0142"},{value:"HKD",label:"HK $"},{value:"USD",label:"US $"}]},{name:"priceType",type:"select",questionText:"Price is for...",options:[{value:0,label:"One Container",icon:"stop"},{value:1,label:"All Containers",icon:"view_module"}]}],currentPage:2,setStep:n,form:u,setFormField:d});case 3:return o.a.createElement(en,{questions:[{name:"expiryDate",type:"date",questionText:"Expiry Date"}],currentPage:3,setStep:n,form:u,setFormField:d});case 4:return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ze,{form:u}),o.a.createElement(X,{iconName:"help_outline",title:"Is it correct?",subtitle:"Double check the info you provided above. If you would like to make corrections, click 'Previous' to correct"}),o.a.createElement("div",{className:"FoodQuantityInfo-ButtonRow"},o.a.createElement(be,{title:"Previous",icon:"arrow_back",color:"",onClick:function(){return n(3)}}),o.a.createElement(be,{title:"Confirm",icon:"check_circle_outline",color:"",onClick:function(){var e=Array(u.containersCount).fill({foodName:u.selectedFood,price:new me(0===u.priceType?u.price:k(u.price/u.containersCount,2),u.currency),expiryDate:u.expiryDate,amount:u.amount});r(e),s(c),n(5)}})));case 5:return o.a.createElement(o.a.Fragment,null,o.a.createElement(X,{iconName:"check_circle_outline",title:"Food added to basket",subtitle:"You can choose 'Buy again' to add more, or 'Close' to review your basket"}),o.a.createElement("div",{className:"FoodQuantityInfo-ButtonRow"},o.a.createElement(be,{title:"Close",icon:"close",color:"",onClick:t}),o.a.createElement(be,{title:"Buy Again",icon:"refresh",color:"",onClick:function(){return n(0)}})));default:return null}};return o.a.createElement(Je,{open:n,requestClose:t,headerTitle:function(e){switch(e){case 0:return"Select Food";case 5:return"Success";default:return"Fill in Info"}},totalSteps:6,style:a},m)};function tn(){var e=Object(F.a)(["\n    query GetFood($name: String!) {\n        food(name: $name) @client {\n            unit\n        }\n    }\n"]);return tn=function(){return e},e}var an=Object(te.a)(tn()),on=function(e){var n=e.order,t=Object(h.a)(e,["order"]),a=n.foodName,r=n.amount,c=n.expiryDate,i=Object(ne.b)(an,{variables:{name:a}}),l=i.loading,u=i.data,s=i.error;return s?(alert(s.message),null):l?null:o.a.createElement(w,Object.assign({mainText:a,smallComponent:c?c.toLocaleString("en-US"):"No expiry date",rightComponent:o.a.createElement("div",null,"".concat(r," ").concat(u.food.unit))},t))},rn=function(e){var n=e.orders;if(0===n.length)return null;var t=n.reduce((function(e,n){return new me(n.price.amount,n.price.currency).as("EUR").add(e)}),new me(0,"EUR")),a=Array.from(new Set(n.map((function(e){return e.foodName}))).values()).length,r=n.length;return o.a.createElement("div",{className:"BuyPage-SummaryRow"},o.a.createElement("div",{className:"BuyPage-SummaryRow-Left"}),o.a.createElement("div",{className:"BuyPage-SummaryRow-Total"},o.a.createElement("div",null,r," Container(s)"),o.a.createElement("div",null,a," Different food"),o.a.createElement("div",{className:"BuyPage-SummaryRow-Sum"},"Total: ",t.amount.toFixed(2)," EUR")))};function cn(){var e=Object(F.a)(["\n    mutation buyFoods($orders: [BuyOrder]!) {\n        buyFood(buyOrders: $orders) @client {\n            id\n        }\n    }\n"]);return cn=function(){return e},e}var ln=Object(te.a)(cn()),un=function(){var e=o.a.useState(!1),n=Object(_.a)(e,2),t=n[0],a=n[1],r=o.a.useState([]),c=Object(_.a)(r,2),i=c[0],l=c[1],u=o.a.useState(!1),s=Object(_.a)(u,2),d=s[0],m=s[1],f=W().setNavOptions;o.a.useEffect((function(){f({title:"Purchase Food",navButtons:[{iconName:"add",onClick:function(){return a(!0)}}]})}),[]);var p=Object(ne.a)(ln),v=Object(_.a)(p,1)[0];return o.a.createElement(o.a.Fragment,null,o.a.createElement(nn,{open:t,requestClose:function(){return a(!1)},onBuyOrdersAdded:function(e){return l([].concat(Object(ve.a)(i),Object(ve.a)(e)))}}),o.a.createElement("div",{className:"BuyPage-Main"},o.a.createElement(Y,{watch:i,iconName:"shopping_cart",title:"Nothing to buy yet",subtitle:"Click the '+' button above to add a new item"},o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"BuyPage-PendingItemContainers"},i.map((function(e,n){return o.a.createElement(on,{order:e,actionButton:{iconName:"cancel",onClick:function(){return l(i.filter((function(e,t){return n!==t})))}}})}))),!t&&o.a.createElement(rn,{orders:i}),o.a.createElement(be,{disabled:0===i.length||d,title:"Buy",color:"info",icon:"shopping_cart",onClick:function(){v({variables:{orders:i}}),S.b.success("Items bought",{autoClose:1e3,onOpen:function(){m(!0)},onClose:function(){a(!1),l([]),m(!1)}})}})))))},sn={"Amount Used":0,"Amount Left":1,"Percentage Left":2,All:3},dn=function(e){var n=e.amount,t=e.capacity,a=e.onAmountChosen,r=e.unit,c={amount:0,interpretationType:Object.values(sn)[0]},i=o.a.useState(c),l=Object(_.a)(i,2),u=l[0],s=l[1],d=function(){switch(u.interpretationType){case 0:return u.amount;case 1:return n-u.amount;case 2:return parseFloat((n-t*(u.amount/100)).toFixed(2));default:return n}}(),m=(n-d)/t*100;return o.a.useEffect((function(){a(d)}),[d,a]),o.a.createElement("div",{className:"AmountInput-Container"},o.a.createElement(J,{type:"number",value:u.amount,name:"amount",label:"Amount",onChange:function(e){return s(Object(fe.a)({},u,{amount:parseFloat(e)||0}))}}),o.a.createElement("p",null,"Interpret amount as..."),o.a.createElement(K,{options:Object.keys(sn).map((function(e){return{label:e,value:sn[e]}})),value:u.interpretationType,onSelect:function(e){return s(Object(fe.a)({},u,{interpretationType:e}))}}),o.a.createElement("div",{className:"AmountInput-Summary"},"Remaining: ","  ",o.a.createElement("div",{className:"AmountInput-SummaryText"},(n-d).toFixed(2)," ",r," (",m.toFixed(1)," %)")))},mn=t(84),fn=t.n(mn);t(159),t(160);function pn(){var e=Object(F.a)(["\n    query getContainersForFood($food: String!) {\n        food(name: $food) @client {\n            name\n            unit\n            info {\n                totalAmount\n                numberOfContainers\n            }\n\n            containers {\n                id\n                capacity\n                amount\n                datePurchased\n                expiryDate\n                dateOpened\n                price\n\n                opened\n                expired\n                percentageLeft\n            }\n        }\n    }\n"]);return pn=function(){return e},e}var vn=Object(te.a)(pn()),En=function(e){var n=e.food,t=e.onSelectContainer,a=e.onToPreviousPage,r=e.selectedContainerIds,c=Object(ne.b)(vn,{variables:{food:n}}),i=c.loading,l=c.error,u=c.data,s=c.refetch,d=o.a.useState(0),m=Object(_.a)(d,2),f=m[0],p=m[1],v=o.a.useState(0),E=Object(_.a)(v,2),b=E[0],g=E[1];if(o.a.useEffect((function(){n&&s({food:n}),p(0)}),[n,s]),i)return null;if(l)return alert(l.message),null;var h=u.food,O=(h.name,h.unit,h.containers),C=(h.info,O[f]),N=r.indexOf(C.id)>-1;return o.a.createElement("div",{className:"ContainerPicker-Container"},o.a.createElement("div",null,n),o.a.createElement("br",null),"Container #",f+1," of ",O.length,o.a.createElement("div",{style:{paddingLeft:24,paddingRight:24}},o.a.createElement(fn.a,{dots:!0,infinite:!1,afterChange:function(e){return p(e)}},h.containers.map((function(e,n){return o.a.createElement(Pe,{key:n,container:e,unit:h.unit})})))),o.a.createElement("div",{className:"ContainerPicker-AmountInputContainer"},C&&(N?o.a.createElement("div",{className:"ContainerPicker-SelectedNotice"},o.a.createElement("div",null,"Container selected")):o.a.createElement(dn,{unit:h.unit,amount:C.amount,capacity:C.capacity,onAmountChosen:function(e){return g(e)}}))),o.a.createElement("div",{className:"ContainerPicker-ButtonRow"},o.a.createElement(be,{title:"Previous",icon:"refresh",color:"",onClick:a}),o.a.createElement(be,{title:"Confirm",icon:"check",color:"",disabled:!(!!C&&b>0&&b<=C.amount)||N,onClick:function(){t(C,b)}})))},bn=function(e){var n=e.open,t=e.requestClose,a=e.onConsumeOrderAdded,r=e.pendingConsumeOrders,c=r.map((function(e){return e.container.id})),i=r.reduce((function(e,n){return Object(fe.a)({},e,Object(pe.a)({},n.food,(e[n.food]||0)+1))}),{}),l=o.a.useState({selectedFood:null,container:null,amount:0}),u=Object(_.a)(l,2),s=u[0],d=u[1],m=function(e,n){switch(e){case 0:return o.a.createElement(Qe,{foodCounts:i,filterFood:function(e){return e.containers.length>0},onFoodSelected:function(e){var t,a;t="selectedFood",a=e,d(Object(fe.a)({},s,Object(pe.a)({},t,a))),n(1)}});case 1:return s.selectedFood&&o.a.createElement(En,{food:s.selectedFood,onToPreviousPage:function(){return n(0)},selectedContainerIds:c,onSelectContainer:function(e,t){!function(e,n){a({food:s.selectedFood,container:e,amount:n})}(e,t),n(2)}});case 2:return o.a.createElement(o.a.Fragment,null,o.a.createElement(X,{iconName:"check_circle_outline",title:"Record added",subtitle:"You can choose 'Add Another' to add another record, or 'Close' to review your consumption order."}),o.a.createElement("div",{className:"FoodQuantityInfo-ButtonRow"},o.a.createElement(be,{title:"Close",icon:"close",color:"",onClick:t}),o.a.createElement(be,{title:"Add Another",icon:"refresh",color:"",onClick:function(){return n(0)}})));default:return null}};return o.a.createElement(Je,{open:n,requestClose:t,totalSteps:3,headerTitle:function(e){switch(e){case 0:return"Select Food";case 1:return"Select Container";case 2:return"Success";default:return""}}},m)};function gn(){var e=Object(F.a)(["\n    query getUnit($food: String!) {\n        food(name: $food) @client {\n            unit\n        }\n    }\n"]);return gn=function(){return e},e}var hn=Object(te.a)(gn()),On=function(e){var n=e.food,t=e.container,a=e.amount,r=e.onRemove,c=Object(ne.b)(hn),i=c.loading,l=c.error,u=c.data,s=c.refetch;if(o.a.useEffect((function(){s({food:n})}),[n]),i)return null;if(l)return alert(l.message),null;var d=u.food.unit,m=o.a.createElement("div",{className:"PendingConsumptionCard-Right"},"-",a," ",d),f=parseFloat((t.amount/t.capacity*100).toFixed(2)),p=parseFloat((a/t.capacity*100).toFixed(2)),v=o.a.createElement("div",{className:"PendingConsumptionCard-SmallComponent"},o.a.createElement("div",null,f,"% ",o.a.createElement(O.a,null,"arrow_right")," ",f-p,"%"),o.a.createElement(Te,{color:"orange",percentageLeft:f,percentageDifference:p}),f-p<1&&o.a.createElement("div",{className:"PendingConsumptionCard-DisposeLabel"},"To be disposed"));return o.a.createElement(w,{mainText:n,rightComponent:m,smallComponent:v,actionButton:{iconName:"highlight_off",onClick:r}})};t(161);function Cn(){var e=Object(F.a)(["\n    mutation consumeFoods($orders: [ConsumeOrder]!) {\n        consumeFoods(consumeOrders: $orders) @client {\n            id\n        }\n    }\n"]);return Cn=function(){return e},e}var Nn=Object(te.a)(Cn()),yn=function(){var e=o.a.useState(!1),n=Object(_.a)(e,2),t=n[0],a=n[1],r=Object(ne.a)(Nn),c=Object(_.a)(r,1)[0],i=o.a.useState([]),l=Object(_.a)(i,2),u=l[0],s=l[1],d=o.a.useState(!1),m=Object(_.a)(d,2),f=m[0],p=m[1],v=W().setNavOptions;return o.a.useEffect((function(){v({title:"Consume Food",navButtons:[{iconName:"add",onClick:function(){return a(!0)}}]})}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement(bn,{open:t,requestClose:function(){return a(!1)},onConsumeOrderAdded:function(e){return s([].concat(Object(ve.a)(u),[e]))},pendingConsumeOrders:u}),o.a.createElement(Y,{watch:u,iconName:"whatshot",title:"No Items added",subtitle:"Use the '+' button above to add containers to consume."},o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"PendingConsumption-Container"},u.map((function(e,n){return o.a.createElement(On,Object.assign({},e,{onRemove:function(){return s(u.filter((function(e,t){return n!==t})))}}))}))),o.a.createElement(be,{color:"info",onClick:function(){c({variables:{orders:u.map((function(e){return{__typename:"ConsumeOrder",containerID:e.container.id,amount:e.amount}}))}}),S.b.success("Records saved...",{autoClose:1e3,onOpen:function(){p(!0)},onClose:function(){s([]),p(!1)}})},disabled:0===u.length||f,title:"Consume",icon:"whatshot"}))))},Sn=t(60),Fn={foods:[]},wn=Object(Sn.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fn,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"ADD_FOOD":var t=n.data;return Object(fe.a)({},e,{foods:[].concat(Object(ve.a)(e.foods),[t])});case"BUY_FOOD":var a=n.data,o=a.foodID,r=a.quantity,c=a.price,i=a.expiryDate,l=Object(fe.a)({},e),u=l.foods.find((function(e){return e.id===o}));return u?(u.buy(r,c,i),l):e;case"EDIT_FOOD":var s=n.data,d=s.foodID,m=s.food,f=Object(fe.a)({},e,{foods:e.foods.map((function(e){return d!==e.id||e.updateInfo(m.name,m.unit,m.latestTimeToConsumeAfterFirstOpen),e}))});return f;case"CONSUME_FOOD":default:return e}})),jn=new(t(85).a)({typeDefs:"\n    enum Currency {\n        HKD\n        USD\n        EUR\n        PLN\n    }\n\n    enum Unit {\n        mL\n        g\n        unit\n    }\n\n\n    type Price {\n        currency: Currency!\n        amount: Number!\n    }\n\n    type FoodContainerInfo {\n        expired: Boolean!\n    }\n\n    type FoodContainer {\n        id: ID!\n        capacity: Number!\n        amount: Number!\n        datePurchased: Date!\n        expiryDate: Date\n        dateOpened: Date\n        price: Price!\n\n        opened: Boolean!\n        expired: Boolean!\n        percentageLeft: Number!\n    }\n\n    type FoodInfo {\n        numberOfContainers: Number!\n        expiredContainers: Number!\n        openedContainers: Number!\n        \n        totalAmount: Number!\n        totalWorth: Number!\n\n        percentageLeft: Number!\n\n        understock: Boolean!\n    }\n\n    type Food {\n        stockLevel: Number,\n        name: String!\n        unit: Unit!,\n        containers: [FoodContainer!]!\n        info: FoodInfo\n    }\n    \n    type BuyOrder {\n        foodName: String!\n        price: Price!\n        expiryDate: Date\n        amount: Number!\n    }\n\n    type ConsumeOrder {\n        containerID: ID!\n        amount: Number!\n    }\n\n    type Query {\n        food(name: String!): Food\n        foods: [Food]!\n    }\n\n    type Mutation {\n        addFood(name: String!, unit: Unit!): Food\n        buyFood(buyOrders: [BuyOrder]!): [FoodContainer]\n        editFood(originalName: String!, newData: Food!): Food\n        consumeFoods(consumeOrders: [ConsumeOrder]!): [ID!]\n    }\n",resolvers:$e}),kn=t(19),Dn=(t(162),function(){switch(new URLSearchParams(Object(i.e)().search).get("page")){case l:return o.a.createElement(re,null);case u:return o.a.createElement(Se,null);case d:return o.a.createElement(De,null);case f:return o.a.createElement(Ae,null);case s:return o.a.createElement(Re,null);case m:return o.a.createElement(un,null);case v:return o.a.createElement(yn,null);case p:return o.a.createElement(Ge,null);default:return null}}),In=function(){return o.a.useEffect((function(){!function(){var e=Ue();e.foods||(e.foods=[]),e.foods.forEach((function(e,n,t){e.containers||(t[n].containers=[]),e.stockLevel||(e.stockLevel=0)})),qe(e)}()}),[]),o.a.createElement(kn.a,{client:jn},o.a.createElement("div",{className:"App"},o.a.createElement(Ee.a,{store:wn},o.a.createElement(i.b,{history:g},o.a.createElement(M,null,o.a.createElement("div",{className:"Page"},o.a.createElement(i.c,null,o.a.createElement(i.a,{path:E.HOME,component:Dn})))),o.a.createElement(S.a,null),o.a.createElement(y,null)))))},xn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Tn(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(o.a.createElement(In,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/Inventory-v2",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/Inventory-v2","/service-worker.js");xn?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var a=t.headers.get("content-type");404===t.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Tn(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Tn(n,e)}))}}()},74:function(e,n,t){},75:function(e,n,t){}},[[111,1,2]]]);
//# sourceMappingURL=main.b608fa20.chunk.js.map