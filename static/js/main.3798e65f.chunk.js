(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{113:function(e,n,t){e.exports=t(160)},118:function(e,n,t){},122:function(e,n,t){},125:function(e,n,t){},126:function(e,n,t){},127:function(e,n,t){},128:function(e,n,t){},129:function(e,n,t){},134:function(e,n,t){},135:function(e,n,t){},136:function(e,n,t){},137:function(e,n,t){},138:function(e,n,t){},139:function(e,n,t){},140:function(e,n,t){},158:function(e,n,t){},159:function(e,n,t){},160:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),r=t(28),c=t.n(r),i=(t(118),t(18)),u=t(44),l=t(172),s=function(e){var n=e.title,t=e.icon,a=(e.path,e.active);return o.a.createElement("div",{className:"NavIcon-Container"},o.a.createElement("div",{className:"NavIcon ".concat(a?"NavIcon-Active":"")},o.a.createElement(l.a,{style:{color:a?"primary":"text"}},t)," ",n))},m="food",d="food_new",f="food_details",p="food_edit",v="buy",E="containers",b="settings",g="consume",h={FOOD_LIST:"/app?page=food",FOOD_ADD:"/app?page=food_new",FOOD_DETAILS:"/app?page=food_details",FOOD_EDIT:"/app?page=food_edit",BUY_FOOD:"/app?page=buy",CONTAINERS_LIST:"/app?page=containers",SETTINGS:"/app?page=settings",CONSUME:"/app?page=consume",HOME:"/app"},y=(t(122),[{title:"Assets",icon:"work-outline",path:h.CONTAINERS_LIST},{title:"Consume",icon:"whatshot",path:h.CONSUME},{title:"Food",icon:"fastfood",path:h.FOOD_LIST},{title:"Buy",icon:"shopping-cart",path:h.BUY_FOOD},{title:"Settings",icon:"settings",path:h.SETTINGS}]),O=function(){var e=Object(i.g)(),n=Object(i.f)();return o.a.createElement("div",{className:"NavBarContainer"},y.map((function(t,a){return o.a.createElement("div",{key:a,onClick:function(){return n.push(t.path)}},o.a.createElement(s,Object.assign({},t,{active:(e.pathname.split("/app")[1]||"/app").startsWith(t.path.split("/app")[1]||"/app")})))})))},C=t(27),N=(t(124),t(13)),S=t(8),D=(t(125),function(e){var n=e.mainText,t=e.rightComponent,a=e.smallComponent,r=e.onClick,c=e.actionButton;return o.a.createElement("div",{className:"GenericCard",onClick:r},c&&o.a.createElement("div",{className:"GenericCard-ActionButton"},o.a.createElement("div",{onClick:c.onClick},o.a.createElement(l.a,null,c.iconName))),o.a.createElement("div",{className:"GenericCard-Left"},o.a.createElement("div",{className:"GenericCard-MainText"},n),o.a.createElement("div",{className:"GenericCard-containers"},a)),o.a.createElement("div",{className:"GenericCard-Right"},t))}),w={UNOPENED:{color:"white",icon:"kitchen"},UNOPENED_EXPIRED:{color:"white",icon:"delete_forever"},OPENED:{color:"orange",icon:"kitchen"},OPENED_EXPIRED:{color:"orange",icon:"delete_forever"}},j=function(e){var n=e.containers,t=(new Date).getDate(),a=n.map((function(e,n){var a=e.expiryDate,r=e.dateOpened,c=(Object.keys(w)[0],!!a&&new Date(a).getDate()>t),i=!!r,u=w[c?i?"OPENED_EXPIRED":"UNOPENED_EXPIRED":i?"OPENED":"UNOPENED"],s=u.icon,m=u.color;return o.a.createElement(l.a,{key:n,style:{color:m}},s)}));return o.a.createElement(o.a.Fragment,null,a)},F=function(e){var n=e.icon,t=e.value,a=e.style;return o.a.createElement("div",{className:"FoodCard-SmallInfo",style:a},n&&o.a.createElement(l.a,null,n),t)},k=Object(i.h)((function(e){var n=e.name,t=e.unit,a=e.info,r=e.onClick,c=e.containers,i=Object(S.a)(e,["name","unit","info","onClick","containers"]),u=o.a.createElement(F,{value:"".concat(a.totalAmount," ").concat(t),style:{fontSize:18}}),l=a.numberOfContainers?o.a.createElement(j,{containers:c}):"No containers";return o.a.createElement(D,Object.assign({mainText:n,rightComponent:u,smallComponent:l,onClick:r},i))})),I=t(7),x=t(80);t(126);var B=Object(x.a)((function(){var e=o.a.useState({title:"",withBackButton:!1}),n=Object(I.a)(e,2);return{navOptions:n[0],setNavOptions:n[1]}})),A=Object(I.a)(B,2),P=A[0],R=A[1],T=function(){var e=R().navOptions,n=e.title,t=e.navButtons,a=e.withBackButton,r=Object(i.f)();return o.a.createElement("div",{className:"Header"},o.a.createElement("div",null,a&&o.a.createElement(l.a,{style:{fontSize:32},onClick:function(){return r.goBack()}},"navigate_before"),n),o.a.createElement("div",{className:"Header-NavButtonGroup"},t&&t.map((function(e){var n=e.iconName,t=e.onClick;return o.a.createElement("div",{className:"Header-NavButton",onClick:t},o.a.createElement(l.a,null,n))}))))},_=function(e){var n=e.children;return o.a.createElement(P,null,o.a.createElement(T,null),n)},L=function(e,n){return function(t){var a=R().setNavOptions;return o.a.useEffect((function(){a(n)}),[]),o.a.createElement(e,t)}},U=t(22),q=Object(U.a)(),$=(t(127),function(e){var n=e.onChange,t=e.value,a=e.required,r=void 0!==a&&a,c=e.validate,i=void 0===c?function(){return!0}:c,u=e.name,s=e.label,m=e.type,d=void 0===m?"text":m,f=e.placeholder,p=e.className,v=e.iconName,E=Object(S.a)(e,["onChange","value","required","validate","name","label","type","placeholder","className","iconName"]),b=o.a.useState(i(t)),g=Object(I.a)(b,2),h=g[0],y=g[1],O=function(e){r&&!e||!i(e)?y(!1):y(!0),n(e)},C=function(e){return e instanceof Date?e.toLocaleString("en-US"):e||""},N="Input  ".concat(h?"":"Invalid"),D="Input-Inner ".concat(p||"");switch(d){case"select":if(!E)throw new Error("Input field is `select` but not options provided.");var w=E,j=w.options,F=w.multiple,k=void 0!==F&&F,x=Object(S.a)(w,["options","multiple"]);return o.a.createElement("div",null,s&&o.a.createElement("p",null,s),o.a.createElement("div",{className:N},v&&o.a.createElement(l.a,null,v," "),o.a.createElement("select",Object.assign({multiple:k,name:u},x,{className:D,onChange:function(e){return O(e.target.value)},value:C(t)}),f&&o.a.createElement("option",{value:"",selected:""===t},f),j.map((function(e){return o.a.createElement("option",{selected:e===t},e)}))),o.a.createElement(l.a,null,"expand_more")));default:return o.a.createElement(o.a.Fragment,null,s&&o.a.createElement("p",null,s),o.a.createElement("div",{className:N},v&&o.a.createElement(l.a,null,v," "),o.a.createElement("input",Object.assign({name:u},E,{className:D,placeholder:f,onChange:function(e){return O(e.target.value)},type:d,value:C(t)})),"number"===d&&o.a.createElement("div",{className:"Input-NumberPicker"},o.a.createElement(l.a,{onClick:function(){return O((t||0)+1)}},"expand_less"),o.a.createElement(l.a,{onClick:function(){return O((t||0)-1)}},"expand_more"))))}}),W=(t(128),function(e){var n=e.iconName,t=e.title,a=e.subtitle;return o.a.createElement("div",{className:"CenterNotice"},o.a.createElement(l.a,{style:{fontSize:72}},n),o.a.createElement("div",{style:{textAlign:"center"}},t&&o.a.createElement("h3",null,t),a&&o.a.createElement("h6",null,a)))}),G=function(e){var n=e.watch,t=e.children,a=Object(S.a)(e,["watch","children"]);return 0!==n.length&&n?t:o.a.createElement(W,a)},H=W,z=(t(129),{iconName:"search",title:"No results found"}),M=function(e){var n=e.list,t=e.filterFunc,a=e.renderItem,r=e.minimumSearchLength,c=void 0===r?1:r,i=e.inputConfig,u=e.emptyResultConfig,l=void 0===u?z:u,s=o.a.useState(""),m=Object(I.a)(s,2),d=m[0],f=m[1],p=d.length>=c?n.filter((function(e){return t(e,d)})):n;return o.a.createElement("div",{className:"SearchGroup"},o.a.createElement("div",{className:"SearchGroup-Input"},o.a.createElement($,Object.assign({},i,{value:d,onChange:function(e){return f(e)}}))),o.a.createElement("div",{className:"SearchGroup-List"},o.a.createElement(G,Object.assign({watch:p},l),p.map((function(e){return a(e)})))))},V=t(12),K=t(14);function Q(){var e=Object(N.a)(["\n    {\n        foods @client {\n            name\n            unit\n            containers {\n                expiryDate\n                dateOpened\n            }\n            info {\n                numberOfContainers\n                totalAmount\n            }\n        }\n    }\n"]);return Q=function(){return e},e}var J=Object(K.a)(Q()),Y=L((function(){var e=Object(V.b)(J),n=e.loading,t=e.error,a=e.data,r=e.refetch;Object(i.g)().search;if(o.a.useEffect((function(){r()}),[window.location.pathname]),t)return alert(t.message),null;if(n)return o.a.createElement("div",null," loading...");var c=a.foods;return o.a.createElement(G,{watch:c,iconName:"fastfood",title:"No food is added",subtitle:"click the '+' button to add a new type of food"},o.a.createElement(M,{list:c,filterFunc:function(e,n){return e.name.toLowerCase().includes(n.toLowerCase())},inputConfig:{name:"FoodSearchInput",iconName:"search",placeholder:"Search for food..."},minimumSearchLength:2,renderItem:function(e){return o.a.createElement(k,Object.assign({},e,{onClick:function(){return q.push(h.FOOD_DETAILS+"&food=".concat(e.name))}}))}}))}),{title:"Food",navButtons:[{iconName:"add",onClick:function(){return q.push(h.FOOD_ADD)}}]}),X=t(68),Z=t.n(X),ee=t(83),ne=t(40),te={unit:"unit",g:"g",mL:"mL"},ae=function(){function e(n,t){Object(ee.a)(this,e),this.amount=n,this.currency=t}return Object(ne.a)(e,[{key:"as",value:function(n){var t=this.amount*e.toHKDRate(this.currency);return new e(t/e.toHKDRate(n),n)}},{key:"add",value:function(n){return new e(n.as(this.currency).amount+this.amount,this.currency)}}]),e}();ae.toHKDRate=function(e){switch(e){case"EUR":return 8.6;case"USD":return 7.6;case"PLN":return 2;case"HKD":return 1}},ae.DEFAULT_ZERO=new ae(0,"HKD");var oe=t(34),re=t(25),ce=t(21),ie=t(49),ue=(t(134),function(e){var n=e.title,t=e.icon,a=e.color,r=void 0===a?"primary":a,c=e.onClick,i=e.disabled,u=void 0!==i&&i,s=e.className;return o.a.createElement("div",{className:"".concat(s," Button Button-").concat(r," ").concat(u?"Button-Disabled":""),onClick:u?void 0:c},t&&o.a.createElement(l.a,null,t),n)}),le=(t(135),function(e){var n=e.initialValue,t=e.layout,a=e.submitIconName,r=e.submitButtonText,c=e.onSubmit,u=e.withSubmitButton,l=void 0===u||u,s=e.disabledFields,m=e.setFormValue,d=Object(ie.c)((function(e){return e}),ie.b),f=Object(i.f)(),p=Object(i.g)(),v="function"===typeof t?t(d,f,p,n):t,E=Object(ce.a)(v.reduce((function(e,n){return[].concat(Object(ce.a)(e),Object(ce.a)(n))}),[])),b=n||Object.assign.apply(Object,[{}].concat(Object(ce.a)(E.map((function(e){var n=e.name,t=e.type;if(!e.required)return null;switch(t){case"number":return Object(re.a)({},n,0);case"date":return Object(re.a)({},n,new Date);default:return Object(re.a)({},n,"")}}))))),g=o.a.useState(b),h=Object(I.a)(g,2),y=h[0],O=h[1];o.a.useEffect((function(){m&&m(y)}),[y,m]);var C=!E.some((function(e){var n=e.name,t=e.required,a=e.validate;return t&&!y[n]||a&&!a(y[n])})),N=s?s(y):[],D=function(e){return{value:y[e],onChange:function(n){return function(e,n){O(Object(oe.a)({},y,Object(re.a)({},e,n)))}(e,n)},disabled:N.includes(e)}};return o.a.createElement("div",{className:"Form"},v.map((function(e){return o.a.createElement("div",{className:"Form-Row"},e.map((function(e){var n=e.name,t=e.flex,a=void 0===t?1:t,r=Object(S.a)(e,["name","flex"]);return o.a.createElement("div",{className:"Form-Col",style:{flex:a}},o.a.createElement($,Object.assign({name:n},r,D(n))))})))})),o.a.createElement("div",{style:{flex:1}}),l&&o.a.createElement(ue,{color:"info",title:r||"Submit",icon:a,onClick:c&&function(){return c(y)},disabled:!C,className:"Form-Submit"}))});function se(){var e=Object(N.a)(["\n    query {\n        foods @client {\n            name\n        }\n    }\n"]);return se=function(){return e},e}function me(){var e=Object(N.a)(["\n    mutation addFood($name: String!, $unit: Unit!) {\n        addFood(name: $name, unit: $unit) @client {\n            id\n            name\n        }\n    }\n"]);return me=function(){return e},e}var de=Object(K.a)(me()),fe=Object(K.a)(se()),pe=function(e,n,t,a){var o=e.foods;return[[{label:"Food Name",name:"name",placeholder:"Name",iconName:"edit",required:!0,validate:function(e){return!o.find((function(e){e.name;return!0}))}}],[{label:"Unit",name:"unit",placeholder:"Unit",required:!0,flex:4,type:"select",options:Object.values(te)}]]},ve=L((function(){var e=Object(i.f)(),n=Object(V.b)(fe),t=(n.loading,n.error,n.data,Object(V.a)(de)),a=Object(I.a)(t,1)[0];return o.a.createElement(le,{submitButtonText:"Add Food",submitIconName:"add",onSubmit:function(n){return Z.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Z.a.awrap(a({variables:{name:n.name,unit:n.unit}}));case 2:Object(C.b)("Food Added.",{position:C.b.POSITION.TOP_CENTER,autoClose:3e3,onClose:function(){return e.goBack()}});case 3:case"end":return t.stop()}}))},layout:pe})}),{title:"Add Food",withBackButton:!0}),Ee=function(e){var n=e.title,t=(e.iconName,e.value);return o.a.createElement("div",{className:"AuxInfo"},t?parseFloat(t.toString()).toFixed(2):"",o.a.createElement("div",{className:"AuxInfo-Title"},n))},be=function(e){var n=e.iconName,t=e.description,a=e.value,r=e.color;return o.a.createElement("div",{className:"ListInfoItem-Container"},o.a.createElement("div",{className:"ListInfoItem-Left"},o.a.createElement(l.a,{style:{color:r,fontSize:32}},n," ")),o.a.createElement("div",{className:"ListInfoItem-Right",style:{color:r}},o.a.createElement("div",{style:{color:r,fontSize:18}},a),o.a.createElement("div",{style:{color:r}},t)))},ge=(t(136),function(e){var n=e.color,t=e.percentageLeft,a=e.percentageDifference,r=void 0===a?0:a;return o.a.createElement("div",{className:"PercentageBar"},o.a.createElement("div",{style:{flexGrow:t-r,backgroundColor:n,height:8}}),r?o.a.createElement("div",{style:{flexGrow:r,height:8,background:"repeating-linear-gradient(\n                        -50deg,\n                        transparent,\n                        transparent 25%,\n                        ".concat(n," 25%,\n                        ").concat(n," 50%,\n                        transparent 50%\n                    ) top left fixed"),backgroundSize:"30px 30px"}}):null,o.a.createElement("div",{style:{flex:100-t,backgroundColor:"rgba(255, 255, 255, 0.3)"}}))}),he=function(e){return Number.parseFloat(e.toString())},ye=function(e){return Math.ceil(Math.abs(((new Date).getDate()-new Date(e).getDate())/864e5))},Oe=(t(137),function(e){var n=e.container,t=(n.capacity,n.amount),a=n.datePurchased,r=n.expiryDate,c=n.dateOpened,i=n.price,u=n.opened,s=n.expired,m=n.percentageLeft,d=e.unit,f=e.onClick,p=s?"red":u?"orange":"white",v=s?"delete_forever":"kitchen";return o.a.createElement("div",{onClick:f,className:"ContainerCard-Container ContainerCard-Container-".concat(p)},o.a.createElement("div",{className:"ContainerCard-ContainerLeft"},ye(a)," days old",o.a.createElement(l.a,{style:{color:p,fontSize:32}},v),i.amount," ",i.currency),o.a.createElement("div",{className:"ContainerCard-ContainerRight"},o.a.createElement("div",{className:"ContainerCard-ContainerRightUp"},m.toFixed(2),"%",o.a.createElement(ge,{color:p,percentageLeft:m})),o.a.createElement("div",{className:"ContainerCard-ContainerRightBottom"},c?o.a.createElement(o.a.Fragment,null,o.a.createElement(l.a,null,"broken_image"),o.a.createElement("h6",null,new Date(c).toLocaleDateString())):o.a.createElement(o.a.Fragment,null,o.a.createElement(l.a,null,"check"),o.a.createElement("h6",null,"Unopened")),o.a.createElement("h6",{style:{color:p}},function(){if(!r)return"";var e=ye(r);return s?"| Expired ".concat(e," day(s) ago"):"| Expire in ".concat(e," days")}()),o.a.createElement("div",{className:"ContainerCard-Amount"},t," ",d))))});t(138);function Ce(){var e=Object(N.a)(["\n    query foodDetails($food: String!) {\n        food(name: $food) @client {\n            name\n            unit\n            containers {\n                capacity\n                amount\n                datePurchased\n                expiryDate\n                dateOpened\n                price\n\n                expired\n                opened\n                percentageLeft\n            }\n            info {\n                numberOfContainers\n                expiredContainers\n                openedContainers\n                totalAmount\n                totalWorth\n                percentageLeft\n            }\n        }\n    }\n"]);return Ce=function(){return e},e}var Ne=Object(K.a)(Ce()),Se=function(){var e=Object(i.f)(),n=Object(i.g)(),t=R(),a=t.navOptions,r=t.setNavOptions,c=new URLSearchParams(n.search).get("food"),u=Object(V.b)(Ne,{variables:{food:c}}),l=u.loading,s=u.error,m=u.data;if(c||e.goBack(),o.a.useEffect((function(){r(Object(oe.a)({},a,{title:c,withBackButton:!0,navButtons:[{iconName:"edit",onClick:function(){return e.push({pathname:h.FOOD_EDIT,search:"?food=".concat(c)})}}]}))}),[]),l)return null;if(s)return alert(s.message),null;var d=m.food,f=[{title:"Total Amount",iconName:"kitchen",value:"".concat(d.info.totalAmount," ").concat(d.unit)},{title:"Worth",iconName:"money",value:"".concat(d.info.totalWorth,"\u20ac")},{title:"Percentage Left",iconName:"percentage",value:"".concat(d.info.percentageLeft,"%")}],p=[{color:"white",iconName:"kitchen",description:"Unopened Containers",value:(d.info.numberOfContainers-d.info.openedContainers).toString()},{color:"orange",iconName:"kitchen",description:"Opened Containers",value:d.info.openedContainers.toString()},{color:"red",iconName:"delete_forever",description:"Expired Containers",value:d.info.expiredContainers.toString()}];return o.a.createElement("div",{className:"FoodDetails-Container"},o.a.createElement("div",{className:"FoodDetails-TopSection"},o.a.createElement("h6",null,"Summary"),o.a.createElement("div",{className:"FoodDetails-TopSection-AuxInfoRow"},f.map((function(e){return o.a.createElement(Ee,Object.assign({key:e.title},e))}))),d.info.numberOfContainers>0&&o.a.createElement("div",{className:"FoodDetails-TopSection-LIstInfoRow"},p.map((function(e,n){return o.a.createElement(be,Object.assign({},e,{key:n}))})))),o.a.createElement("div",{className:"FoodDetails-BottomSection"},o.a.createElement(G,{watch:d.containers,iconName:"kitchen",title:"No Containers",subtitle:"Use the buy food function to add containers of this food"},o.a.createElement(o.a.Fragment,null,o.a.createElement("h6",null,d.info.numberOfContainers," Container(s) "),d.containers.map((function(e){return o.a.createElement(Oe,{container:e,unit:d.unit})}))))))},De=L((function(){return o.a.createElement(H,{iconName:"work-outline",title:"Coming Soon!"})}),{title:"Containers",navButtons:[{iconName:"add",onClick:function(){}}]}),we=(t(139),t(84)),je=t.n(we),Fe={foods:[]},ke=function(){var e=localStorage.getItem("db");return e?JSON.parse(e):(localStorage.setItem("db",JSON.stringify(Fe)),Fe)},Ie=function(e){return localStorage.setItem("db",JSON.stringify(e))},xe={Query:{food:function(e,n){var t=n.name,a=ke().foods.find((function(e){return e.name===t}));return a},foods:function(){return ke().foods}},FoodContainer:{datePurchased:function(e){return new Date(e.datePurchased)},opened:function(e){return!!e.dateOpened},expired:function(e){return!!e.expiryDate&&new Date(e.expiryDate).getDate()<(new Date).getDate()},percentageLeft:function(e){return e.amount/e.capacity*100}},Food:{info:function(e){var n=e.containers.reduce((function(e,n){return e+n.amount}),0),t=e.containers.reduce((function(e,n){return e+n.capacity}),0),a=e.containers.filter((function(e){return e.expiryDate&&new Date(e.expiryDate).getDate()<(new Date).getDate()})).length,o=e.containers.filter((function(e){return!!e.dateOpened})).length,r=e.containers.reduce((function(e,n){var t=n.price;return e+new ae(t.amount,t.currency).as("EUR").amount}),0);return{__typename:"FoodInfo",numberOfContainers:e.containers.length,expiredContainers:a,openedContainers:o,totalAmount:n,totalWorth:r,percentageLeft:0===t?0:n/t*100}}},Mutation:{addFood:function(e,n){var t=n.name,a=n.unit,o=ke();o.foods.push({__typename:"Food",name:t,unit:a,containers:[]}),Ie(o)},buyFood:function(e,n){var t=n.buyOrders,a=ke(),o=[];return t.forEach((function(e){var n=e.foodName,t=e.price,r=e.expiryDate,c=e.amount,i=a.foods.findIndex((function(e){return e.name===n}));if(i>-1){var u={__typename:"FoodContainer",id:je()((new Date).toString()+n+c),capacity:he(c),amount:he(c),datePurchased:new Date,expiryDate:r?new Date(r):null,dateOpened:null,price:t};a.foods[i].containers.push(u),o.push(u)}})),Ie(a),o},consumeFoods:function(e,n){var t=n.consumeOrders,a=ke(),o=!1;return t.forEach((function(e){var n=e.containerID,t=e.amount,r=a.foods.findIndex((function(e){return e.containers.find((function(e){return e.id===n}))}));if(r<0)return console.log("food id < 0"),void(o=!0);var c=a.foods[r].containers.findIndex((function(e){return e.id===n}));if(a.foods[r].containers[c].amount<t)return console.log("amount isnt right"),void(o=!0);a.foods[r].containers[c].amount-=t,a.foods[r].containers[c].dateOpened||(a.foods[r].containers[c].dateOpened=new Date);var i=a.foods[r].containers[c];i.amount/i.capacity<.01&&(a.foods[r].containers=a.foods[r].containers.filter((function(e,n){return n!==c})))})),o||Ie(a),o?t.map((function(e){return e.containerID})):null}}},Be=function(e){var n=e.title,t=e.description,a=e.buttonTitle,r=e.onClick;return o.a.createElement("div",{className:"Settings-DescriptionRow"},o.a.createElement("div",{className:"Settings-DescriptionRowLeft"},o.a.createElement("div",{className:"Settings-DescriptionRowTitle"},n),o.a.createElement("div",{className:"Settings-DescriptionRowDescription"},t)),o.a.createElement("div",{className:"Settings-DescriptionRowRight"},o.a.createElement("div",{className:"Settings-DescriptionRowButton",onClick:r},a)))},Ae=[{title:"Reset Database",description:"Remove all data you have saved in the local storage. This can not be undone.",buttonTitle:"Remove",onClick:function(){window.localStorage.setItem("db",JSON.stringify(Fe)),C.b.info("Database has been reset.",{autoClose:3e3,onClose:function(){return window.location.reload()}})}},{title:"Validate Database",description:"Validate the values in the current database and try to correct it.",buttonTitle:"Validate"}],Pe=L((function(){return o.a.createElement("div",{className:"Settings-Container"},Ae.map((function(e,n){return o.a.createElement(Be,Object.assign({key:n},e))})))}),{title:"Settings"});t(140);function Re(){var e=Object(N.a)(["\n    query {\n        foods @client {\n            name\n            unit\n            containers {\n                expiryDate\n                dateOpened\n            }\n            info {\n                totalAmount\n                numberOfContainers   \n            }\n        }\n    }\n"]);return Re=function(){return e},e}var Te=Object(K.a)(Re()),_e=function(e){var n=e.onFoodSelected,t=e.filterFood,a=Object(V.b)(Te),r=a.loading,c=a.error,i=a.data,u=a.refetch;if(o.a.useEffect((function(){u()}),[n,u]),r)return o.a.createElement(H,{iconName:"hamburger",title:"Loading Food List..."});if(c)return alert(c.message),null;var l=i.foods,s=t?l.filter(t):l;return o.a.createElement("div",{className:"FoodTypePicker-Container"},o.a.createElement(G,{watch:s,iconName:"hamburger",title:"No food available",subtitle:"Add some food or buy some containers for them and try again."},s.map((function(e){return o.a.createElement(k,Object.assign({},e,{onClick:function(){return n(e.name)}}))}))))},Le=t(59);function Ue(){var e=Object(N.a)(["\n    query FoodInfo($name: String!) {\n        food(name: $name) @client {\n            name\n            unit\n            containers {\n                expiryDate\n                dateOpened\n            }\n            info {\n                totalAmount\n                numberOfContainers\n            }\n        }\n    }\n"]);return Ue=function(){return e},e}var qe=Object(K.a)(Ue()),$e=function(e){return o.a.createElement("div",{className:"FoodQuantityInfo-Summary"},o.a.createElement("p",null,"You are buying:"),o.a.createElement(k,e))},We=[[{label:"Container Capcity",type:"number",name:"amount",placeholder:"Amount",iconName:"local_mall",required:!0,flex:2,validate:function(e){return!!(e&&e>0)}},{label:"# Containers",type:"number",name:"containerCount",iconName:"kitchen",required:!0,flex:1,validate:function(e){return!!(e&&e>0)}}],[{label:"Price",type:"number",name:"price",iconName:"local_atm",required:!0,validate:function(e){return!!(e&&e>0)},flex:2},{label:"Currency",type:"select",name:"currency",iconName:"euro",flex:1,options:Object.values({EUR:"EUR",USD:"USD",PLN:"PLN",HKD:"HKD"})}],[{label:"Price is for...",type:"select",name:"priceType",iconName:"live_help",options:["Each Container","All Containers"]}],[{label:"Expiry Date",type:"date",name:"expiryDate",iconName:"calendar"}]],Ge=function(e){return e.containerCount<=1?["priceType"]:[]},He={amount:0,price:0,currency:"EUR",containerCount:1,priceType:"All Containers",expiryDate:null},ze=function(e){var n=e.food,t=e.onPreviousStepRequested,a=e.onInfoProvided,r=o.a.useState(He),c=Object(I.a)(r,2),i=c[0],u=c[1],l=Object(V.b)(qe,{variables:{name:n}}),s=l.data,m=l.loading;if(m)return null;return o.a.createElement("div",{className:"FoodQuantityInfo-Container"},!m&&o.a.createElement(Le.a,{offsetTop:-16},o.a.createElement($e,s.food)),o.a.createElement("div",{className:"FoodQuantityInfo-Form"},o.a.createElement(le,{withSubmitButton:!1,layout:We,initialValue:He,setFormValue:u,disabledFields:Ge})),o.a.createElement("div",{className:"FoodQuantityInfo-ButtonRow"},o.a.createElement(ue,{title:"Previous",icon:"navigate_before",color:"secondary",onClick:t}),o.a.createElement(ue,{title:"Next",icon:"save",color:"info",onClick:function(){var e=i.amount,t=i.price,o=i.currency,r=i.containerCount,c=i.priceType,u=i.expiryDate,l=Array(r).fill({amount:e,price:{currency:o,amount:"All Containers"===c?t/r:t},foodName:n,expiryDate:u});a(l)}})))},Me=t(85),Ve=(t(73),function(e){var n=e.step,t=e.totalSteps,a=function(e){var n=e.i,t=e.status;return o.a.createElement("div",{className:"StepIndicator-StepComponent StepIndicator-StepComponent-".concat(t)},o.a.createElement("div",{className:"StepIndicator-Line"}),o.a.createElement("div",{className:"StepIndicator-Center"},n+1),o.a.createElement("div",{className:"StepIndicator-Line"}))},r=function(e){return e<n?"passed":e===n?"ongoing":"pending"};return o.a.createElement("div",{className:"StepIndicator-Container"},Object(Me.range)(t).map((function(e){return o.a.createElement(a,{i:e,status:r(e)})})))}),Ke=function(e){var n=e.open,t=e.requestClose,a=e.children,r=e.style,c=e.headerTitle,i=o.a.useState(0),u=Object(I.a)(i,2),s=u[0],m=u[1];return o.a.useEffect((function(){m(0)}),[n]),n?o.a.createElement("div",{className:"Wizard-Container",style:r},o.a.createElement("div",{className:"Wizard-Header"},o.a.createElement("div",{className:"Header"},o.a.createElement("div",null,o.a.createElement(l.a,{style:{fontSize:32},onClick:t},"navigate_before")),o.a.createElement("div",{className:"Header-NavButtonGroup"},c(s)))),o.a.createElement(Ve,{step:s,totalSteps:3}),o.a.createElement("div",{className:"Wizard-Content"},a(s,m))):null},Qe=(t(74),function(e){var n=e.open,t=e.requestClose,a=e.style,r=e.onBuyOrdersAdded,c=o.a.useState(null),i=Object(I.a)(c,2),u=i[0],l=i[1];if(o.a.useEffect((function(){l(null)}),[n]),!n)return null;return o.a.createElement(Ke,{open:n,requestClose:t,headerTitle:function(e){switch(e){case 0:return"Select Food";case 1:return"Fill in Info";case 2:return"Success";default:return""}},style:a},(function(e,n){switch(e){case 0:return o.a.createElement(_e,{onFoodSelected:function(e){l(e),n(1)}});case 1:return o.a.createElement(ze,{food:u,onPreviousStepRequested:function(){return n(0)},onInfoProvided:function(e){r(e),n(2)}});case 2:return o.a.createElement(o.a.Fragment,null,o.a.createElement(H,{iconName:"check_circle_outline",title:"Food added to basket",subtitle:"You can choose 'Buy again' to add more, or 'Close' to review your basket"}),o.a.createElement("div",{className:"FoodQuantityInfo-ButtonRow"},o.a.createElement(ue,{title:"Close",icon:"close",color:"secondary",onClick:t}),o.a.createElement(ue,{title:"Buy Again",icon:"refresh",color:"info",onClick:function(){return n(0)}})));default:return null}}))});function Je(){var e=Object(N.a)(["\n    query GetFood($name: String!) {\n        food(name: $name) @client {\n            unit\n        }\n    }\n"]);return Je=function(){return e},e}var Ye=Object(K.a)(Je()),Xe=function(e){var n=e.order,t=Object(S.a)(e,["order"]),a=n.foodName,r=n.amount,c=n.expiryDate,i=Object(V.b)(Ye,{variables:{name:a}}),u=i.loading,l=i.data,s=i.error;return s?(alert(s.message),null):u?null:o.a.createElement(D,Object.assign({mainText:a,smallComponent:c?c.toLocaleString("en-US"):"No expiry date",rightComponent:o.a.createElement("div",null,"".concat(r," ").concat(l.food.unit))},t))},Ze=function(e){var n=e.orders;if(0===n.length)return null;var t=n.reduce((function(e,n){return new ae(n.price.amount,n.price.currency).as("EUR").add(e)}),new ae(0,"EUR")),a=Array.from(new Set(n.map((function(e){return e.foodName}))).values()).length,r=n.length;return o.a.createElement("div",{className:"BuyPage-SummaryRow"},o.a.createElement("div",{className:"BuyPage-SummaryRow-Left"}),o.a.createElement("div",{className:"BuyPage-SummaryRow-Total"},o.a.createElement("div",null,r," Container(s)"),o.a.createElement("div",null,a," Different food"),o.a.createElement("div",{className:"BuyPage-SummaryRow-Sum"},"Total: ",t.amount.toFixed(2)," EUR")))};function en(){var e=Object(N.a)(["\n    mutation buyFoods($orders: [BuyOrder]!) {\n        buyFood(buyOrders: $orders) @client {\n            id\n        }\n    }\n"]);return en=function(){return e},e}var nn=Object(K.a)(en()),tn=function(){var e=o.a.useState(!1),n=Object(I.a)(e,2),t=n[0],a=n[1],r=o.a.useState([]),c=Object(I.a)(r,2),i=c[0],u=c[1],l=R().setNavOptions;o.a.useEffect((function(){l({title:"Buy",navButtons:[{iconName:"add",onClick:function(){return a(!0)}}]})}),[]);var s=Object(V.a)(nn),m=Object(I.a)(s,1)[0];return o.a.createElement(o.a.Fragment,null,o.a.createElement(Qe,{open:t,requestClose:function(){return a(!1)},onBuyOrdersAdded:function(e){return u([].concat(Object(ce.a)(i),Object(ce.a)(e)))}}),o.a.createElement("div",{className:"BuyPage-Main"},o.a.createElement(G,{watch:i,iconName:"shopping_cart",title:"Nothing to buy yet",subtitle:"Click the '+' button above to add a new item"},o.a.createElement(o.a.Fragment,null,i.map((function(e,n){return o.a.createElement(Xe,{order:e,actionButton:{iconName:"cancel",onClick:function(){return u(i.filter((function(e,t){return n!==t})))}}})})),!t&&o.a.createElement(Ze,{orders:i}),o.a.createElement(ue,{disabled:0===i.length,title:"Buy",color:"info",icon:"shopping_cart",onClick:function(){m({variables:{orders:i}}),C.b.success("Items bought",{autoClose:3e3,onClose:function(){a(!1),u([])}})}})))))},an={"Amount Used":0,"Amount Left":1,"Percentage Left":2,All:3},on=[[{name:"amount",label:"Amount",type:"number",iconName:"fitness_center"}],[{name:"interpretationType",label:"Interpret amount as...",type:"select",options:Object.keys(an),iconName:"comment"}]],rn=function(e){var n=e.amount,t=e.capacity,a=e.onAmountChosen,r=e.unit,c={amount:0,interpretationType:Object.keys(an)[0]},i=o.a.useState(c),u=Object(I.a)(i,2),l=u[0],s=u[1],m=function(){switch(an[l.interpretationType]){case 0:return l.amount;case 1:return t-l.amount;case 2:return parseFloat((n-t*(l.amount/100)).toFixed(2));default:return n}}(),d=(n-m)/t*100;return o.a.useEffect((function(){a(m)}),[m,a]),o.a.createElement("div",{className:"AmountInput-Container"},o.a.createElement(le,{initialValue:c,layout:on,withSubmitButton:!1,submitIconName:"check",submitButtonText:"Consume",setFormValue:function(e){return s(e)}}),o.a.createElement("div",{className:"AmountInput-Summary"},"Remaining: ","  ",o.a.createElement("div",{className:"AmountInput-SummaryText"},(n-m).toFixed(2)," ",r," (",d.toFixed(1)," %)")))},cn=t(86),un=t.n(cn);t(156),t(157);function ln(){var e=Object(N.a)(["\n    query getContainersForFood($food: String!) {\n        food(name: $food) @client {\n            name\n            unit\n            info {\n                totalAmount\n                numberOfContainers\n            }\n\n            containers {\n                id\n                capacity\n                amount\n                datePurchased\n                expiryDate\n                dateOpened\n                price\n\n                opened\n                expired\n                percentageLeft\n            }\n        }\n    }\n"]);return ln=function(){return e},e}var sn=Object(K.a)(ln()),mn=function(e){var n=e.food,t=e.onSelectContainer,a=e.onToPreviousPage,r=Object(V.b)(sn,{variables:{food:n}}),c=r.loading,i=r.error,u=r.data,l=r.refetch,s=o.a.useState(0),m=Object(I.a)(s,2),d=m[0],f=m[1],p=o.a.useState(0),v=Object(I.a)(p,2),E=v[0],b=v[1];if(o.a.useEffect((function(){n&&l({food:n}),f(0)}),[n]),c)return null;if(i)return alert(i.message),null;var g=u.food,h=g.name,y=g.unit,O=g.containers,C=g.info,N=O[d];return o.a.createElement("div",{className:"ContainerPicker-Container"},o.a.createElement(Le.a,{offsetTop:-8},o.a.createElement("div",{style:{paddingTop:8}},"Selecting containers for:",o.a.createElement(k,{name:h,unit:y,containers:O,info:C}))),"Container #",d+1," of ",O.length,o.a.createElement("div",{style:{paddingLeft:24,paddingRight:24}},o.a.createElement(un.a,{dots:!0,infinite:!1,afterChange:function(e){return f(e)}},g.containers.map((function(e,n){return o.a.createElement(Oe,{key:n,container:e,unit:g.unit})})))),o.a.createElement("div",{className:"ContainerPicker-AmountInputContainer"},N&&o.a.createElement(rn,{unit:g.unit,amount:N.amount,capacity:N.capacity,onAmountChosen:function(e){return b(e)}})),o.a.createElement("div",{className:"ContainerPicker-ButtonRow"},o.a.createElement(ue,{title:"Previous",icon:"refresh",color:"secondary",onClick:a}),o.a.createElement(ue,{title:"Confirm",icon:"check",color:"info",disabled:!(!!N&&E>0&&E<=N.amount),onClick:function(){t(N,E)}})))},dn=function(e){var n=e.open,t=e.requestClose,a=e.onConsumeOrderAdded,r=o.a.useState(null),c=Object(I.a)(r,2),i=c[0],u=c[1];return o.a.createElement(Ke,{open:n,requestClose:t,headerTitle:function(e){switch(e){case 0:return"Select Food";case 1:return"Select Container";case 2:return"Success";default:return""}}},(function(e,n){switch(e){case 0:return o.a.createElement(_e,{filterFood:function(e){return e.containers.length>0},onFoodSelected:function(e){u(e),n(1)}});case 1:return o.a.createElement(mn,{food:i,onToPreviousPage:function(){return n(0)},onSelectContainer:function(e,t){!function(e,n){a({food:i,container:e,amount:n})}(e,t),n(2)}});case 2:return o.a.createElement(o.a.Fragment,null,o.a.createElement(H,{iconName:"check_circle_outline",title:"Record added",subtitle:"You can choose 'Add Another' to add another record, or 'Close' to review your consumption order."}),o.a.createElement("div",{className:"FoodQuantityInfo-ButtonRow"},o.a.createElement(ue,{title:"Close",icon:"close",color:"secondary",onClick:t}),o.a.createElement(ue,{title:"Add Another",icon:"refresh",color:"info",onClick:function(){return n(0)}})));default:return null}}))};function fn(){var e=Object(N.a)(["\n    query getUnit($food: String!) {\n        food(name: $food) @client {\n            unit\n        }\n    }\n"]);return fn=function(){return e},e}var pn=Object(K.a)(fn()),vn=function(e){var n=e.food,t=e.container,a=e.amount,r=e.onRemove,c=Object(V.b)(pn),i=c.loading,u=c.error,s=c.data,m=c.refetch;if(o.a.useEffect((function(){m({food:n})}),[n]),i)return null;if(u)return alert(u.message),null;var d=s.food.unit,f=o.a.createElement("div",{className:"PendingConsumptionCard-Right"},"-",a," ",d),p=parseFloat((t.amount/t.capacity*100).toFixed(2)),v=parseFloat((a/t.capacity*100).toFixed(2)),E=o.a.createElement("div",{className:"PendingConsumptionCard-SmallComponent"},o.a.createElement("div",null,p,"% ",o.a.createElement(l.a,null,"arrow_right")," ",p-v,"%"),o.a.createElement(ge,{color:"orange",percentageLeft:p,percentageDifference:v}),p-v<1&&o.a.createElement("div",{className:"PendingConsumptionCard-DisposeLabel"},"To be disposed"));return o.a.createElement(D,{mainText:n,rightComponent:f,smallComponent:E,actionButton:{iconName:"highlight_off",onClick:r}})};t(158);function En(){var e=Object(N.a)(["\n    mutation consumeFoods($orders: [ConsumeOrder]!) {\n        consumeFoods(consumeOrders: $orders) @client {\n            id\n        }\n    }\n"]);return En=function(){return e},e}var bn=Object(K.a)(En()),gn=function(){var e=o.a.useState(!1),n=Object(I.a)(e,2),t=n[0],a=n[1],r=Object(V.a)(bn),c=Object(I.a)(r,1)[0],i=o.a.useState([]),u=Object(I.a)(i,2),l=u[0],s=u[1],m=R().setNavOptions;return o.a.useEffect((function(){m({title:"Consume Food",navButtons:[{iconName:"add",onClick:function(){return a(!0)}}]})}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement(dn,{open:t,requestClose:function(){return a(!1)},onConsumeOrderAdded:function(e){return s([].concat(Object(ce.a)(l),[e]))}}),o.a.createElement(G,{watch:l,iconName:"whatshot",title:"No Items added",subtitle:"Use the '+' button above to add containers to consume."},o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"PendingConsumption-Container"},l.map((function(e,n){return o.a.createElement(vn,Object.assign({},e,{onRemove:function(){return s(l.filter((function(e,t){return n!==t})))}}))}))),o.a.createElement(ue,{color:"info",onClick:function(){c({variables:{orders:l.map((function(e){return{__typename:"ConsumeOrder",containerID:e.container.id,amount:e.amount}}))}}),C.b.success("Records saved...",{autoClose:3e3,onClose:function(){s([])}})},disabled:0===l.length,title:"Consume",icon:"whatshot"}))))},hn=t(58),yn={foods:[]},On=Object(hn.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yn,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"ADD_FOOD":var t=n.data;return Object(oe.a)({},e,{foods:[].concat(Object(ce.a)(e.foods),[t])});case"BUY_FOOD":var a=n.data,o=a.foodID,r=a.quantity,c=a.price,i=a.expiryDate,u=Object(oe.a)({},e),l=u.foods.find((function(e){return e.id===o}));return l?(l.buy(r,c,i),u):e;case"EDIT_FOOD":var s=n.data,m=s.foodID,d=s.food,f=Object(oe.a)({},e,{foods:e.foods.map((function(e){return m!==e.id?e:(e.updateInfo(d.name,d.unit,d.latestTimeToConsumeAfterFirstOpen),e)}))});return f;case"CONSUME_FOOD":default:return e}})),Cn=new(t(87).a)({typeDefs:"\n    enum Currency {\n        HKD\n        USD\n        EUR\n        PLN\n    }\n\n    enum Unit {\n        mL\n        g\n        unit\n    }\n\n\n    type Price {\n        currency: Currency!\n        amount: Number!\n    }\n\n    type FoodContainerInfo {\n        expired: Boolean!\n    }\n\n    type FoodContainer {\n        id: ID!\n        capacity: Number!\n        amount: Number!\n        datePurchased: Date!\n        expiryDate: Date\n        dateOpened: Date\n        price: Price!\n\n        opened: Boolean!\n        expired: Boolean!\n        percentageLeft: Number!\n    }\n\n    type FoodInfo {\n        numberOfContainers: Number!\n        expiredContainers: Number!\n        openedContainers: Number!\n        \n        totalAmount: Number!\n        totalWorth: Number!\n\n        percentageLeft: Number!\n    }\n\n    type Food {\n        name: String!\n        unit: Unit!,\n        containers: [FoodContainer!]!\n        info: FoodInfo\n    }\n    \n    type BuyOrder {\n        foodName: String!\n        price: Price!\n        expiryDate: Date\n        amount: Number!\n    }\n\n    type ConsumeOrder {\n        containerID: ID!\n        amount: Number!\n    }\n\n    type Query {\n        food(name: String!): Food\n        foods: [Food]!\n    }\n\n    type Mutation {\n        addFood(name: String!, unit: Unit!): Food\n        buyFood(buyOrders: [BuyOrder]!): [FoodContainer]\n        consumeFoods(consumeOrders: [ConsumeOrder]!): [ID!]\n    }\n",resolvers:xe}),Nn=t(20),Sn=(t(159),function(){var e=new URLSearchParams(Object(i.g)().search);switch(console.log(e.get("page")),e.get("page")){case m:return o.a.createElement(Y,null);case p:case d:return o.a.createElement(ve,null);case E:return o.a.createElement(De,null);case f:return o.a.createElement(Se,null);case v:return o.a.createElement(tn,null);case g:return o.a.createElement(gn,null);case b:return o.a.createElement(Pe,null);default:return null}}),Dn=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(Nn.a,{client:Cn},o.a.createElement(ie.a,{store:On},o.a.createElement(u.a,{basename:"/Inventory-v2"},o.a.createElement(_,null,o.a.createElement("div",{className:"Page"},o.a.createElement(i.c,null,o.a.createElement(i.a,{path:h.HOME,component:Sn})))),o.a.createElement(C.a,null),o.a.createElement(O,null)))))},wn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function jn(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(o.a.createElement(Dn,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/Inventory-v2",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/Inventory-v2","/service-worker.js");wn?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var a=t.headers.get("content-type");404===t.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):jn(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):jn(n,e)}))}}()},73:function(e,n,t){},74:function(e,n,t){}},[[113,1,2]]]);
//# sourceMappingURL=main.3798e65f.chunk.js.map